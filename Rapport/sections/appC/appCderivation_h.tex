\chapter{Derivation of ideal impulse response}\label{appC}
In \trine{Dette er udledning af båndstop, skal laves om til bandpass!!!}order to derive the ideal impulse response the ideal frequency response is defined as follows on behave of figure \ref{fig:spec_Hd}
\begin{align*}
 H_d(\text{e}^{j\omega})= \begin{cases}
 0, \ \ \ & |\omega| \leq \omega_{c_1} \\
  \text{e}^{-j\omega\frac{M}{2}}, \ \ \ & \omega_{c1} \leq | \omega | \leq \omega_{c2} \\
  0, \ \ \ & \omega_{c_2} \leq |\omega| \leq \pi 
\end{cases}
\end{align*}
From this the ideal impulse response is determined by the inverse Fourier transformation 
\begin{align*}
h_d[n] &= \frac{1}{2\pi} \left(  \int_{-\omega_{c2}}^{-\omega_{c_1}} \text{e}^{-j\omega \frac{M}{2}} \cdot \text{e}^{j \omega n} d\omega + \int_{\omega_{c_1}}^{\omega_{c_2}} \text{e}^{-j\omega \frac{M}{2}} \cdot \text{e}^{j \omega n} d\omega	\right) \\
&= \frac{1}{2\pi} \left(  \int_{-\omega_{c2}}^{-\omega_{c_1}} \text{e}^{j\omega \left(n- \frac{M}{2} \right) } d\omega + \int_{\omega_{c_1}}^{\omega_{c_2}} \text{e}^{j\omega \left(n- \frac{M}{2} \right) }  d\omega \right).
\end{align*}
Then one use that the following is true
\begin{align*}
\int_{-\pi}^{\pi} \text{e}^{j\omega \left(n- \frac{M}{2} \right) }  d\omega =& \int_{-\pi}^{\pi} \cos\left( \omega \left(n-\frac{M}{2}\right)\right)+j \sin \left( \omega \left(n-\frac{M}{2}\right) \right) d\omega \\
=& \left[ \sin\left(\omega \left(n-\frac{M}{2}\right)\right) \right]_{-\pi}^{\pi} \cdot \frac{1}{n- \frac{M}{2}}.
\end{align*}
Hence
\begin{align*}
h_d[n]= \frac{1}{\pi \left(n-\frac{M}{2}\right)} \left(\sin\left(\omega_{c_2} \left(n-\frac{M}{2}\right)\right) - \sin\left(\omega_{c_1} \left(n-\frac{M}{2}\right)\right) - \sin\left( \pi\left( n + \frac{M}{2} \right) \right) \right).
\end{align*}
The last part must by $0$ hence the ideal impulse response is defined as
\begin{align*}
h_d[n]= \frac{1}{\pi \left(n-\frac{M}{2}\right)} \left(\sin\left(\omega_{c_2} \left(n-\frac{M}{2}\right)\right) - \sin\left(\omega_{c_1} \left(n-\frac{M}{2}\right)\right)\right)
\end{align*}
This is only true for $n \neq 0$ and $h_d[0]$ must be defined separately. For this l'Hôspitals rule $\lim \frac{f(x)}{g(x)}=\lim \frac{f'(x)}{g'(x)}$ is used. Thus
\begin{align*}
h_d[0]=& \frac{1}{\pi} \left( \cos\left( \omega_{c_1} \left(n-\frac{M}{2}\right) \right)\omega_{c_1} - \cos\left( \omega_{c_2} \left(n-\frac{M}{2}\right) \right)\omega_{c_2} +  \cos\left(\pi \left( n- \frac{M}{2}\right) \right) \pi \right) \\
=& \frac{1}{\pi}\left( \omega_{c_1} - \omega_{c_2} + \pi \right) \\
=& 1 - \frac{\omega_{c_2}-\omega_{c_1}}{\pi}
\end{align*}
 
 