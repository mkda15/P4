The filter design process is documented in this section including test and optimization. As stated in section \ref{sec:filtervalg} a FIR filter of type I, designed by the Kaiser window is wanted.
\subsection{Specifications}\label{sec:FIRspec} 
By the aim of letting a limited frequency band though the filter - as found in the frequency analysis chapter \ref{ch9} - the filter is to be designed as a bandpass filter. It is essential to note that the filter to be design in this project is not an adaptive filter. Meaning that the filter specification will be chosen on behalf of a specific signal with known noise. During test the filter is adapted to other signals only by chancing the specifications for the cut off frequencies.\\
This filter is determined to remove noise in the form of background speaking from a signal representing a low E note. \\
Due to the frequency analysis of single tones section \ref{sec:single} the energy in the signal is located within a frequency band from 75 Hz to 1000 Hz.  
By letting the cut off frequencies $ft$ of the filter be respectively 75 Hz and 1000 Hz this makes the passband of the filter. 
\\
!!!Something about the analysis of the noise, maybe!!!\\

The peak approximation error $\delta$ is determined as $\delta=0.05$. Further the width of the transition band is determined as $\Delta \omega = ((ft + \frac{\delta_2}{2})-(ft - \frac{\delta}{2}))2\pi$.\\
On behalf of the determined specifications the magnitude response of the ideal filter is sketched in figure \ref{??}   
\\ Inds√¶t figur \\ 
Due to the method of the Kaiser window, section \ref{subsec:FIR}, the shape parameter $\beta$ and the order of the filter $M$ is determined as  
\begin{align}
\beta =& \ 0.1102(60-8.7) = 5.65326 \\
M =& \ \frac{60-8}{2.285\cdot 0.05\cdot 2\pi}\approx 74 
\end{align}
\subsection{Implementation}
The implementation of the filter basically follows algorithm \ref{alg:FIR}. First filter specifications are defined. Then one function defines the ideal impulse response as the inverse Fourier transformation of the ideal filter specified on figure \ref{??}. For derivation of the ideal impulse response of a bandpass filter consult appendix \ref{appC}. Another function defines the Kaiser window. Then the filter is defined by multiplying the ideal...

\begin{algorithm}[H]
\caption{Compute type I FIR filter}
\label{alg:FIR}
\begin{algorithmic}[1] 
\State $M = 74$ \Comment {Order of filter} 
\State $\beta = 5.65326$ \Comment {Shape parameter}
\State $N = M+1$ \Comment {Lenght of filter}
\State $f1_1 = 75$ \Comment {Cutoff frequency $1$}
\State $f1_2 = 1000$ \Comment {Cutoff frequency $2$}
\Procedure{Compute ideal impulse response}{$h_d$}
    \For {each integer $i$ in $h_d$}
        \If {$i == \frac{M}{2}$}
        		\State $h_d[i] = 2(\omega_2 - \omega_1)$
        	\Else 
        		\State  $h_d[i] = \frac{1}{ (\pi (i - \frac{M}{2}))}(\sin(\omega_2 2 \pi (i - \frac{M}{2})) - (\sin(\omega_1 2 \pi (i - \frac{M}{2}))))$ 
        	\EndIf 
	\EndFor
	\State Return $h_d$
\EndProcedure
\\
\Procedure{Compute kaiser window}{$w$}
	\For {each integer $i$ in length of $N$}
		\For {each integer $j$ in length of $M$}
			\State $ sum_n = + \ (\frac{1}{j!})^2 \left( \left( \frac{\beta}{2} \sqrt{\left(1 - \left( \frac{2*i}{N-1}\right) - 1\right)^2}\right)^{2j}\right)$
			\State $ sum_d = + \ (\frac{1}{j!})^2 \left( \frac{\beta}{2}\right)^{j2}$
		\EndFor
		\State $w[i]=\frac{sum_n}{sum_d}$
	\EndFor
	\State Return $w$
\EndProcedure
\\
\Procedure{Compute frequency response}{$H$}
	\State $h = h_d \cdot w$ \Comment{Windowed impulse response}
	\State $H = fft(h)$ \Comment {Fourier transformation of impulse response}
	\State Return $H$
\EndProcedure

\end{algorithmic}
\end{algorithm}