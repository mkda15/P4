In this chapter a model of and requirements to the system addressed in the problem statement are specified. This specification remains on a superficial level as a foundation to the system design in chapter \ref{ch7}. Furthermore test specifications of the system are made by means of the development model called the V-model. Through this a delimitation of the project will furthermore be established. \\   
\\
Due to the presented problem statement the purpose of the application is to use data representing music to create a note sheet representing said music. This is illustrated in figure \ref{fig:model1}.    
\begin{figure}[h]
\centering
\begin{tikzpicture}[auto, node distance=3.4cm, >=triangle 45, font=\sffamily ]
\draw
% Drawing the blocks of first filter :
	node at (0,0)[right=-15mm] {\textit{Music}}
	node [input, name=input1] {} 
	node [block, right of=input1] (app1) {?}
    node [output, name=output1, right of=app1]{}
    node at (6,0) [right=10mm]{\textit{Note sheet}}
;
% Joining blocks. 
% Commands \draw with options like [->] must be written individually
\draw[->](input1) -- node {Input}(app1);
\draw[->](app1) -- node {Output}(output1);

% Boxing and labelling noise shapers
\draw [color=gray,thick,dashed](-1.8,-1.2) rectangle (9.5,1.2);
\node at (-1.8,1.5) [above=5mm, right=0mm] {System};
\end{tikzpicture}
\caption{Basic concept of the system}
\label{fig:model1}
\end{figure}
In order for an application to perform this transformation an analogue sound has to be converted into a discrete time signal, in order for a computer to process the signal into the wanted outcome. \\
By this the system is fundamentally based upon theory about discrete time systems, including analysis and processing of such systems and the data at disposal.

\section{Synthesizing}\label{sec:synth}
To develop/design the system a synthesis approach is used to expand the basic concept of the system in order to define the purpose and thereby requirements of each part of the system.
Figure \ref{fig:synth} illustrates the synthesizing of the system down to a level showing the essential parts of the system. The further synthesizing of the system is left for chapter \ref{ch7}\trine{will it be synthesizing i chaper 7?}. The next section elaborates the synthesizing process by defining the requirements for each part of the system.
\begin{figure}[H]
\centering

\tikzstyle{block} = [rectangle, draw,thick, 
    text width=4.2em, text centered, minimum height=3em]
    
%%%%% crazy opsætning til stor parentes %%%%%
\tikzset{round left paren/.style={ncbar=0.5cm,out=120,in=-120}}
\tikzset{round right paren/.style={ncbar=0.5cm,out=60,in=-60}}
\tikzset{
    ncbar angle/.initial=90,
    ncbar/.style={
        to path=(\tikztostart)
        -- ($(\tikztostart)!#1!\pgfkeysvalueof{/tikz/ncbar angle}:(\tikztotarget)$)
        -- ($(\tikztotarget)!($(\tikztostart)!#1!\pgfkeysvalueof{/tikz/ncbar angle}:(\tikztotarget)$)!\pgfkeysvalueof{/tikz/ncbar angle}:(\tikztostart)$)
        -- (\tikztotarget)
    },
    ncbar/.default=0.5cm,
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{tikzpicture}[auto, node distance=3cm, >=triangle 45, level 1/.style={sibling distance=70mm},
    level 2/.style={sibling distance=20mm},font=\sffamily ]
\draw
 % Drawing blocks 
	node at (0,0)[right=-15mm] {\textit{Music}}
	node [input, name=input1] {} 
	node [block, right of=input1] (app1) {?}
		child {
		node [block] (audio) {Audio file} 
			child {
				node [block] (mic) {Mic.}					
				}			
			child {
				node [block] (ADC) {ADC}					
				}
			child {
				node [block] (save) {Storage}
				}
			}
		child {
			node [block] (algorithm) {Algorithm}
			child {
				node [block] (four) {Signal mod.}
				}
			child {
				node [block] (filter) {Spectral analysis}
				}
			child {
				node [block] (spec) {Repr. of spectrum }
				}
			child {
				node [block] (symb) {Symbol process.}
				}	
			}
    node [output, name=output1, right of=app1]{}
    node at (output1) [right=1mm]{\textit{Note sheet}}
 % Drawing the blocks of 2. layer:  
;
% stor parantes 
\draw [blue, ultra thick] (8.6,-4) to [round left paren ] (8.6,-2);
\draw [blue, ultra thick] (10.4,-4) to [round right paren ] (10.4,-2);
% Joining blocks. 
% Commands \draw with options like [->] must be written individually
\draw[->](input1) -- node {Input}(app1);
\draw[->](app1) -- node {Output}(output1);

\end{tikzpicture}
\caption{Synthetic block-diagram of the system}
\label{fig:synth}
\end{figure}

        
\subsection{Requirements and delimitations}
\subsubsection{Audio file}
To process an analogue sound in a computer the sound has to be digitalized. This is done by a Sample \& Hold cicuirt and an analogue to digital converter (ADC) which transform an analogue audio signal from a microphone into a digital one discretized in time and amplitude. These bits are then to be stored as an audio file format as .WAV format. This process will be done by a sound card in a computer and some storage software. In order to reconstruct the analogue signal exactly the software needs to provide a sampling frequency of 44,1 kHz and a bit resolution of 16 bits \cite{Mic}. A typical MP3 fil needs about 5 MB memory. \\
The audio files will contain music recorded in an anechoic chamber which minimizes noise and therefore allows the signal/noise ratio to be controlled better.\\      
The produced audio file will act as the \textit{input} for the algorithm that processes the sound. 

\subsubsection{Algorithm}
The main part of the system is the algorithm which takes an audio file as input and generates a corresponding note sheet output. This involves modification, spectral analysis, a spectral representation and generation of a note sheet from the signal:
\begin{itemize}
\item[] \textbf{Signal modification} is needed in this project in order to select which frequencies are wanted for the signal analysis. The modification will be done by a digital filter designed to reduce noise in the signal, because noise is expected in a recorded sound. The filter will be linear and time invariant, thus the filter will be designed to a specific audio file. The filter is expected to remove the expected noise. \trine{specify the type of filter and noise later}             
\item[] \textbf{Spectral analysis} is concerning the spectrum of frequencies corresponding to the signal. This involves transformation of the signal, from time- to frequency domain.     
The primary method used for this purpose is the Fourier transformation which will be used in this project, based on the theoretical focus and learning goals for the project. Alternative methods could be.. \trine{Alternatives to fourier?}.
\item[] \textbf{Representation of frequency spectrum} will be done by plotting frequency over time, forming a spectrogram. By the spectrogram it is possible to analyse the frequencies of the filtered signal. As described in chapter \ref{ch2} a note sheet is basically a spectrogram showing the frequency of the tones.
\item[] \textbf{Symbol processing} is required to create a note sheet on behave of the spectrogram. 
Though based on the given time limit, and the theoretical focus in the project the system are delimited to leave out the step of symbol processing, marked by the blue parentheses i figure \ref{fig:synth}. Hence the spectrogram will make the last step in the algorithm.
A visualisation of the spectrogram will thereby make the \textit{output} of the system.   
\end{itemize}

\section{Final system}
On behave of the stated specifications to the system figure \ref{fig:system} illustrates the final system which will form a basis of the further work. \\ \\
The input of the system is delimited to be an audio file recorded in an anechoic chamber containing music from only one instrument. \\
The application are bounded to create a spectrogram illustrating the frequencies corresponding to the tone on the audio file. The noise are expected to be reduced in such degreed that it is possible to identify the tones by the spectrogram which will form the output of the system.\\
\begin{figure}[H]
\centering
\tikzstyle{block} = [rectangle,draw,thick, text width=4.2em, text centered, minimum height=3em]
\begin{tikzpicture}[node distance=2.2cm,auto,font=\sffamily ,>=latex']
\draw
% Drawing the blocks of first filter :
	node at (0,0)[right=-13mm]{\huge\twonotes} % kan skiftet ud med sinus længere nede
	node [input, name=input1] {} 
	node at (input1) [above=5mm] {\textsf{Mic}}		
	node [block, right of=input1] (ADC) {ADC}
	node [block, right of=ADC] (store) {Storage}
	node [block, right of=store] (four) {Filter}
	node [block, right of=four] (filter) {Fourier Trans.}
	node [block, right of=filter] (spec) {Spectro-gram}
	node [block, right of=spec] (out) {Visual Spectrogram}
;
% Joining blocks. 
% Commands \draw with options like [->] must be written individually

\draw[->](input1) -- node {}(ADC);
\draw[->](ADC) -- node {}(store);
\draw[->](store) -- node {}(four);
\draw[->](four) -- node {}(filter);
\draw[->](filter) -- node {}(spec);
\draw[->](spec) -- node {}(out);
\filldraw[color=black,fill=white,thick](input1) circle (0.3);
\draw(-0.3,0.5) -- (-0.3,-0.5);
%sinus wave
%\draw (-1.5,0) sin (-1.40,0.5) cos (-1.30,0) sin (-1.20,-0.5) cos (-1.10,0) sin (-1,0.5) cos (-0.9,0) sin (-0.8,-0.5) cos (-0.7,0);

% Boxing and labelling noise shapers
\draw [color=gray,thick,dashed](-1.2,-1.3) rectangle (5.43,1.3);
\node at (-1.2,1.5) [above=5mm, right=0mm] {Input};
\draw [color=gray,thick,dashed](5.52,-1.3) rectangle (11.99,1.3);
\node at (5.55,1.5) [above=5mm, right=0mm] {Application};
\draw [color=gray,thick,dashed](12.085,-1.3) rectangle (14.3,1.3);
\node at (12.09,1.5) [above=5mm, right=0mm] {Output};
\end{tikzpicture}
\caption{Basic block-diagram illustrating the final system} 
\label{fig:system}
\end{figure}