\section{Basic principals}

A digital filter is characterised as a \textit{linear time invariant} system referred to as a LTI system, which are to be described completely in the time domain by its impulse response $h[n]$. \\
When a discrete sequence $x[n]$ is applied to a LTI system it is the impulse response of the system $h[n]$ that determined what the output $y[n]$ will be. In other words the impulse response determine how much of the input sequence that passes the filter. \\ 
The output is determined by the convolution sum of input signal and impulse response of the system.
\begin{align}
y[n] = x[n]*h[n] = \sum_{k=1}^{\infty} x[k]h[n-k]
\end{align}    
The frequency response of a filter is given by the Fourier transformation of the impulse response. Consider the input sequence $x[n]=e^{j\omega n}$ for $-\infty < n <\infty$, then the frequency response is defined as\trine{side (40) DTSP}
\begin{align}
H(e^{j\omega})=\sum_{k=-\infty}^{\infty}h[k]e^{-j\omega k}
\end{align}
thus the outcome of the filter becomes 
\begin{align}
y[n]=H(e^{j\omega})e^{-j\omega n} \label{eq:filter_output}
\end{align} 
By \eqref{eq:filter_output} it is seen that $H(e^{j\omega})$ describes the change in complex amplitude of a complex exponential input signal to a given frequency. $H(e^{j\omega})$ is in general complex and hence it can be expressed as
\begin{align}
H(e^{j\omega})=|H(e^{j\omega})|e^{j\measuredangle H(e^{j\omega})}
\end{align}  
where $|H(e^{j\omega})|$ and $e^{j\measuredangle H(e^{j\omega})}$ are the \textit{magnitude} and \textit{phase} response of the filter respectively, both real valued and $2\pi$-periodic.\\ 
If the frequency response of a filter is real it is said to have \textit{zero phase}, which is equivalent to the phase response only taking values that are integer multiples of $\pi$, resolving in a straight phase with zero slope.   Further if the frequency response can be written in the form 
\begin{align}
H(e^{j\omega})=A(e^{j\omega})e^{j(-\alpha\omega + j\beta)} 
\end{align}
where $\alpha$ and $\beta$ are constants and $A(e^{j\omega})$ is real, the filter is said to have \textit{general linear phase}. That is because the phase response consist of constant terms added to the linear function making a straight line with slope $\alpha$ except from the discontinuities resolving from jumps of $2\pi$\trine{explain the discontinuity} \\
A linear phase response is characterized by a constant group delay $\tau(\omega)$
\begin{align}
\tau(\omega)=-\frac{d}{d\omega}\left\{ arg \left[ H(\text{e}^{j\omega}\right] \right\} = \alpha
\end{align}
The phase response is an expression of how each of the signal components are delayed though the system, where linear phase indicates an equal delay for all components of the signal. \trine{der findes yderligere en betingelse for konstant group delay (5.140)DTSP} 

\section{Ideal filters} 
When designing filters it is ideal to have approximately constant magnitude and zero phase corresponding to the frequency response. \\ For an ideal selective frequency filter the magnitude response will be constant unity for the frequencies that are wanted to pass the filter referred to as the \textit{bandpass} and zero for all other frequencies referred to as \textit{bandstop}. An example is an ideal lowpass filter with frequency response 
\begin{align}\label{eq:low}
H_{lp}(\text{e}^{j\omega})=
\left\{ \begin{matrix}
1, &\ \left| \omega \right|< \omega_c \\
0, &\ \omega_c < \left| \omega \right| \leq \pi
\end{matrix}\right.
\end{align}     
where $H_{lp}(\text{e}^{j\omega})$ is $2\pi$ periodic. $\omega_c$ is referred to as the\textit{cutoff frequency}. The lowpass filter selects the frequencies lower than the cutoff frequency and reject the higher frequency components of the signal. By \eqref{eq:low} it is seen that the lowpass filter is real valued hence has zero phase as expected. \\
The corresponding impulse response are determined by using the invers fourier transformation \eqref{??} on the passband interval.
\begin{align}\label{eq:low_im}
h_{lp}[n]=\frac{1}{2\pi}\int_{-\omega_c}^{\omega_c}\text{e}^{j\omega n} d\omega = \frac{1}{2\pi j n}\left[\text{e}^{j\omega n} \right]_{-\omega_c}^{\omega_c} = \frac{\sin \omega_c n}{\pi n }, \ \  -\infty < n < \infty
\end{align}  
A system is called causal if the system output at time index \textit{k} depends only on input up to time \textit{k}. Further this implies $h[k] = 0$ for all $k<0$.\cite{FSP,p.196 & 208}  \\
By \eqref{eq:low_im} the impulse response is nonzero for $n<0$ hence the filter is noncasual.\\
Analogues an ideal highpass or bandpass filter can be defined, as illustrated on figure \ref{fig:ideal}.\\ 

\begin{figure}[H]
	\begin{subfigure}[b]{0.32\textwidth}
        \centering

\begin{tikzpicture}[scale=1]
\begin{axis}[
scale=0.5,
unit vector ratio*=1 1 1,
axis lines = middle,
xtick={1.5,3},
xticklabels={$\omega_c$},
ytick={1.5},
yticklabels={$1$},
xmin=0,
xmax=3,
ymin=0,
ymax=2.6]
\node at (axis cs:0.7,2.4) {$|H(e^{j\omega})|$};
\draw[line width=0.5mm](axis cs:0,1.5)--(axis cs:1.5,1.5);
\draw[line width=0.5mm](axis cs:1.5,1.5)--(axis cs:1.5,0);
\draw[line width=0.5mm](axis cs:1.5,0)--(axis cs:3,0);
\end{axis}
\end{tikzpicture}
\caption{}
    \end{subfigure}
\begin{subfigure}[b]{0.32\textwidth}
        \centering

\begin{tikzpicture}[scale=1]
\begin{axis}[
scale=0.5,
unit vector ratio*=1 1 1,
axis lines = middle,
xtick={1.5},
xticklabels={$\omega_c$},
ytick={1.5},
yticklabels={$1$},
xmin=0,
xmax=3,
ymin=0,
ymax=2.6]
\node at (axis cs:0.7,2.4) {$|H(e^{j\omega})|$};
\draw[line width=0.5mm](axis cs:1.5,1.5)--(axis cs:3,1.5);
\draw[line width=0.5mm](axis cs:1.5,1.5)--(axis cs:1.5,0);
\draw[line width=0.5mm](axis cs:1.5,0)--(axis cs:0,0);
\end{axis}
\end{tikzpicture}

\caption{}
    \end{subfigure}
 \begin{subfigure}[b]{0.32\textwidth}
        \centering  
\begin{tikzpicture}[scale=1]
\begin{axis}[
scale=0.5,
unit vector ratio*=1 1 1,
axis lines = middle,
xtick={1,2},
xticklabels={$\omega_a$,$\omega_b$},
ytick={1.5},
yticklabels={$1$},
xmin=0,
xmax=3,
ymin=0,
ymax=2.6]
\node at (axis cs:0.7,2.4) {$|H(e^{j\omega})|$};
\draw[line width=0.5mm](axis cs:1,1.5)--(axis cs:1,0);
\draw[line width=0.5mm](axis cs:1,1.5)--(axis cs:2,1.5);
\draw[line width=0.5mm](axis cs:2,1.5)--(axis cs:2,0);
\draw[line width=0.5mm](axis cs:1,0)--(axis cs:0,0);
\draw[line width=0.5mm](axis cs:2,0)--(axis cs:3,0);
\end{axis}
\end{tikzpicture}
\caption{}
    \end{subfigure}
\caption{Magnitude of ideal (a) lowpass filter (b) highpass filter (c) bandpass filter}
\label{fig:ideal}
\end{figure}\trine{lav en figur med impuls responsen for a}
When computing a filter it is not possible to let the output depend on future input, hence noncausal systems are not computable, further zero phase is not possible for a causal system. 
Thus an approximation of an ideal filter can be computed by a casual system with general linear phase.    

\subsection{FIR and IIR filter} 
Two classes of filter are essential to identify.\\
For all ideal filters discussed in the previous section the impulse response is defined for $-\infty < n < \infty$ such filter is specified as a \textit{infinite impulse response (IIR)} filter . In the case of the impulse response being zero outside a finite interval the filter is referred to as a \textit{finit impulse response (FIR)} filter \\
\\
as described generalized linear phase are wanted. 
4 typer af FIR-filter med lin. fase side (298)DTSP\\
sammenligning se side (510)DTSP
side (251)DTSP 

\section{Filter design}
In this section the process of designing digital filter are described. There will be a distinguished between techniques for IIR and FIR filters..\\
As described ideal filters are not computable hence the process of designing a filter is based on approximation of the frequency response made by computable polynomials.  


\subsection{IIR-filter}
One common way of designing an IIR-filter is to design the discrete-time filter from a corresponding continuous-time system. The idea follows four main steps. 
\begin{itemize}
\item[1.] Specify the properties desired for the filter.
\item[2.] Hereby compute a "prototype" by a continuous-time system $H_c(j\Omega)$ that approximates the given properties.
\item[3.] Transform the "prototype" into the digital filter $H(?)$ by...
\item[4.] Implementation of the filter. 
\end{itemize}
The properties of a system are specified on behave of the desired application, considering what frequencies are to pass the filter ideally. Further it is important to specify how much the filter are allowed to vary from the ideal properties, from which it will vary. \\
Properties for an approximation to a lowpass filter could be defined by bounding the magnitude within $\pm \ \delta_1$ of unity in a limited frequency band $0 \leq \Omega \leq \Omega_p $ and less than $\delta_2$ in the frequency band $\Omega_s \leq \Omega$. The magnitude $|H_c(j\Omega)|$ pleasing the properties is illustrated on figure \ref{??}\\
The desired gain of the magnitude is often expressed in dB, where $20\log(1)=0[\text{dB}]$ \trine{is gain of magnitude a thing?} \\
The transition off nonzero width between the cutoff frequency of passbad and stopband is necessary in order for the system to be realizable. \\
\\
IndsÃ¦t figur ala fig 7.2a side 441 DTSP\\
\\





   
 


 



